{
  "$schema": "https://opencode.ai/config.json",
  "model": "anthropic/claude-sonnet-4-5",
  "instructions": ["./AGENTS.md", "./instructions/*.md"],
  "mcp": {
    "memento": {
      "type": "local",
      "command": ["npx", "-y", "@gannonh/memento-mcp"],
    },
    "time": {
      "type": "local",
      "command": ["uvx", "mcp-server-time"],
    },
    "cargo": {
      "type": "local",
      "command": ["cargo-mcp", "serve"],
    },
  },
  "agent": {
    "build": {
      "description": "Marvin build agent with full tool access",
      "mode": "primary",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./prompts/marvin-system.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "plan": {
      "description": "Read-only Marvin for planning and analysis",
      "mode": "primary",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./prompts/marvin-system.md}",
      "temperature": 0,
      "tools": {
        "write": false,
        "edit": false,
        "bash": false,
      },
    },
    "research-specialist": {
      "description": "Performs deep research on topics without modifying system state. Records findings in knowledge graph memory and returns summaries with memory node references to preserve context in calling agent.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/research-specialist.md}",
      "temperature": 0.2,
      "tools": {
        "write": false,
        "edit": false,
        "bash": false,
      },
    },
    "technical-documentation-writer": {
      "description": "Creates, updates, and maintains all Markdown documentation in the project. Enforces consistency across all .md files and learns markdownlint rules through memory for continuous improvement.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/technical-documentation-writer.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "dependency-management": {
      "description": "Manages project dependencies using platform-appropriate tooling (cargo, uv, npm, pnpm). Ensures latest compatible versions, security compliance, and proper dependency resolution across all languages.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/dependency-management.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "devops": {
      "description": "Handles infrastructure, deployment, CI/CD, build configuration, and developer tooling tasks. Creates configurations that don't require the strict TDD cycle of application code.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/devops.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "file-editor": {
      "description": "Executes direct file modifications ONLY when user explicitly requests editing a specific file or fixing a specific typo. Lowest priority agent - main coordinator should try all specialized agents first. NEVER used for feature work, tests, domain modeling, or documentation creation.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/file-editor.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "acceptance-validator": {
      "description": "Handles Phase 8 Step 1 (Acceptance Validation) verifying requirements from REQUIREMENTS_ANALYSIS.md are met. Straightforward requirement verification before documentation QA.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/acceptance-validator.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-architect": {
      "description": "Event modeling specialist focused on the technical architecture. Reviews flows, updates artifacts, and collaborates with the main conversation and user to refine scenarios.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/event-modeling-architect.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-pm": {
      "description": "Event modeling specialist focused on the business perspective. Reviews flows, updates artifacts, and collaborates with the main conversation and user to refine scenarios.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/event-modeling-pm.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "story-planner": {
      "description": "Story planning specialist. Breaks work into thin vertical slices, coordinates beads issue creation, and partners with the main conversation and user to capture plans.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/story-planner.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "rust-domain-model-expert": {
      "description": "Creates Rust domain types with nutype to maximize compile-time safety and make illegal states unrepresentable. Writes type definitions directly using Write/Edit tools.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/rust-domain-model-expert.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "python-domain-model-expert": {
      "description": "Creates Python domain types with Pydantic to maximize validation and make illegal states unrepresentable. Writes type definitions directly using Write/Edit tools.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/python-domain-model-expert.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "typescript-domain-model-expert": {
      "description": "Creates TypeScript domain types using branded types and discriminated unions to make illegal states unrepresentable. Writes type definitions directly using Write/Edit tools.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/typescript-domain-model-expert.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "elixir-domain-model-expert": {
      "description": "Creates Elixir domain types using structs with enforced keys and pattern matching to make illegal states unrepresentable. Writes type definitions directly using Write/Edit tools.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/elixir-domain-model-expert.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "requirements-analyst": {
      "description": "Writes requirements documentation directly using Write/Edit tools. Helps define WHAT software should do and WHY through collaborative documentation with user.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/requirements-analyst.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "adr-writer": {
      "description": "Writes ADR documentation directly using Write/Edit tools. Helps analyze decisions and structure rationale with user through collaborative documentation.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/adr-writer.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "design-system-architect": {
      "description": "Writes STYLE_GUIDE.md documentation directly using Write/Edit tools. Creates design system using Atomic Design methodology, focusing on design patterns and visual specifications.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/design-system-architect.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "architecture-synthesizer": {
      "description": "Writes ARCHITECTURE.md documentation directly using Write/Edit tools. Synthesizes accepted ADRs into cohesive system architecture. Called when ADR status changes to/from \"accepted\".",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/architecture-synthesizer.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-0-functional-areas": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 0 - Identifies major functional areas and event models.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-0-functional-areas.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-1-goal-event": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 1 - Identifies goal events.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-1-goal-event.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-2-event-sequence": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 2 - Defines event sequences working backwards from goal.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-2-event-sequence.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-3-commands": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 3 - Defines commands for events.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-3-commands.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-4-triggers": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 4 - Identifies triggers for commands.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-4-triggers.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-5-final-ui": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 5 - Defines final UI screens and wireframes.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-5-final-ui.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-6-queries-projections": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 6 - Defines queries and projections for UI screens.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-6-queries-projections.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-7-projection-events": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 7 - Maps projections to events.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-7-projection-events.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-8-event-data": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 8 - Defines event data fields with domain types.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-8-event-data.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-9-command-sources": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 9 - Documents command data sources.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-9-command-sources.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-10-acceptance": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 10 - Creates Gherkin acceptance criteria for commands.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-10-acceptance.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-11-cross-linking": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 11 - Establishes cross-links between component documents.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-11-cross-linking.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "event-modeling-step-12-completeness": {
      "description": "Writes event model documentation directly using Write/Edit tools. Step 12 - Validates completeness of entire event model.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/event-modeling-step-12-completeness.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "exploration-agent": {
      "description": "Fast codebase exploration agent for understanding project structure, finding files, and searching code. Supports multi-step exploration workflows - launch multiple times with follow-up questions. Use when exploring unfamiliar code, finding patterns, or answering questions about codebase organization. Specify thoroughness level - quick, medium, or very thorough.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/exploration-agent.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "cognitive-complexity-agent": {
      "description": "Analyzes code cognitive complexity using TRACE framework (Type-first, Readability, Atomic scope, Cognitive budget, Essential only). Enforces \u226570% overall score and \u226550% per dimension thresholds. Supports multi-file analysis - launch multiple times for additional files. Quality gate for PR creation.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/cognitive-complexity-agent.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "github-pr-agent": {
      "description": "Manages GitHub pull request workflows including replying to review comments using proper threaded API calls, creating PRs, monitoring CI checks, and addressing review feedback. Supports multi-step PR workflows - launch multiple times for complex PR tasks. Uses gh CLI for all GitHub operations.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/github-pr-agent.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "memory-intelligence-agent": {
      "description": "Manages complex knowledge graph operations for storing decisions, recalling patterns, searching memories, and traversing relationships. Uses temporal anchoring, semantic search, and graph traversal. Supports multi-step knowledge construction - launch multiple times for complex operations. Use for complex memory operations beyond simple create/retrieve.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/memory-intelligence-agent.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "mutation-testing-agent": {
      "description": "Executes mutation testing to verify test suite quality and reports mutation score. Enforces \u226580% mutation score requirement. Supports multi-module testing - launch multiple times for additional modules. Works with cargo-mutants for Rust and similar tools for other languages. Quality gate for PR creation.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/mutation-testing-agent.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "source-control-agent": {
      "description": "Handles git operations, PR creation, and source control workflows. Manages commits with proper verification, pre-commit hook handling, branching, and quality gate enforcement (TRACE, mutation testing). Supports multi-step git workflows - launch multiple times for complex operations.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/source-control-agent.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "ux-consultant": {
      "description": "UX collaboration specialist. Evaluates experience quality, updates design docs, and partners with the main conversation and user on improvements.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/ux-consultant.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "story-architect": {
      "description": "Story architecture specialist. Evaluates feasibility, dependency ordering, and constraints while updating planning artifacts with the user and main conversation.",
      "mode": "subagent",
      "model": "anthropic/claude-sonnet-4-5",
      "prompt": "{file:./agent/story-architect.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "red-tdd-tester": {
      "description": "Writes failing tests following Kent Beck-style TDD. Writes test code directly using Write/Edit tools.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/red-tdd-tester.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
    "green-implementer": {
      "description": "Writes minimal implementations to make failing tests pass following Kent Beck's TDD. Writes implementation code directly using Write/Edit tools.",
      "mode": "subagent",
      "model": "openai/gpt-5-codex",
      "prompt": "{file:./agent/green-implementer.md}",
      "temperature": 0,
      "tools": {
        "write": true,
        "edit": true,
        "bash": true,
      },
    },
  },
}
